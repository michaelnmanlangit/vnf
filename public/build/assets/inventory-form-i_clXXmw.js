document.addEventListener("DOMContentLoaded",function(){const e=document.querySelector(".inventory-form"),t=document.querySelector('button[onclick="showUpdateModal()"]');if(e&&t){let i=function(){const o=new FormData(e);let n=!1;for(let[f,y]of o.entries())if(s[f]!==y){n=!0;break}n?(t.disabled=!1,t.style.opacity="1",t.style.cursor="pointer"):(t.disabled=!0,t.style.opacity="0.5",t.style.cursor="not-allowed")};var r=i;const m=new FormData(e),s={};m.forEach((o,n)=>{s[n]=o}),t.disabled=!0,t.style.opacity="0.5",t.style.cursor="not-allowed",e.querySelectorAll("input, select, textarea").forEach(o=>{o.addEventListener("change",i),o.addEventListener("input",i)})}});function a(){document.querySelectorAll(".modal-overlay").forEach(t=>{t.style.display="none",t.classList.remove("show")})}function p(){const e=document.querySelector(".inventory-form");e&&e.submit()}function h(){const e=document.querySelector(".inventory-form");e&&e.submit()}document.addEventListener("click",function(e){document.querySelectorAll(".modal-overlay").forEach(r=>{e.target===r&&a()})});document.addEventListener("keydown",function(e){e.key==="Escape"&&a()});function d(){return new Date().toISOString().split("T")[0]}const c=document.querySelector('input[name="date_received"]');c&&c.setAttribute("max",d());const l=document.querySelector('input[name="expiration_date"]');l&&l.setAttribute("min",d());const v=document.querySelectorAll('input[type="number"]');v.forEach(e=>{e.addEventListener("blur",function(){this.value&&this.name==="quantity"&&(this.value=parseFloat(this.value).toFixed(2)),this.value&&this.name==="temperature_requirement"&&(this.value=parseFloat(this.value).toFixed(1))})});const u=document.querySelector(".inventory-form");u&&u.addEventListener("keypress",function(e){e.key==="Enter"&&e.target.tagName!=="TEXTAREA"&&e.preventDefault()});function E(){document.querySelectorAll(".flash-message").forEach(t=>{setTimeout(()=>{t.style.opacity="0",t.style.transition="opacity 0.3s ease",setTimeout(()=>t.remove(),300)},4e3)})}E();window.showConfirmModal=showConfirmModal;window.hideConfirmModal=a||function(){const e=document.getElementById("createModal")||document.getElementById("updateModal");e&&(e.style.display="none")};window.confirmSubmit=p;window.confirmUpdate=h;
